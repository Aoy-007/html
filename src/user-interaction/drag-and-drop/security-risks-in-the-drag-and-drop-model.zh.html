  <h4>拖放模型中的安全风险</h4>

  <p>用户代理在 <code data-x="event-dnd-dragstart">dragstart</code> 事件对脚本可用的期间，
  不得把数据添加到 <code>DataTransfer</code> 对象，
  直到 <code data-x="event-dnd-drop">drop</code> 事件为止。
  因为否则的话，如果用户从一个文档拖动敏感信息到第二个文档，过程中经过了一个恶意的第三个文档，
  这个恶意的文档就可以截获数据。</p>

  <p>同样的原因，只有在用户明确停止了拖动操作时用户代理才能认为拖放操作成功。
  &mdash; 如果任何脚本停止了拖动操作，就必须把它视为未成功的（取消的）并且不得触发
  <code data-x="event-dnd-drop">drop</code> 事件。</p>

  <p>用户代理应该小心不要被脚本触发拖放操作。例如，在有鼠标和窗口的环境中，
  如果在用户按下鼠标的过程中一个脚本移动了窗口，用户代理不得把它视为一个拖放操作。
  这很重要，否则的话用户代理可能会在未经用户同意的情况下把数据从敏感数据源拖动到恶意的文档中。</p>

  <p>在拖动和释放时，用户代理应该使用已知的安全特性白名单来过滤掉可能包含的活跃
  （比如脚本）内容（比如 HTML）。类似地，应该把 <span data-x="relative URL">相对 URL</span>
  转为绝对 URL 来避免引用发生预期之外的改变。本规范没有指定具体如何操作。</p>

  <div class="example">

   <p>考虑一个恶意的页面，提供了一些内容并诱导用户选择和拖放（或者拷贝和粘贴）
   该内容给一个受害页面 <code data-x="attr-contenteditable">contenteditable</code> 区域。
   如果浏览器不确保拖动的只有安全内容，就可能释放（或粘贴）非安全内容（比如脚本和选中的事件处理器）
   到受害站点，获取该站点的权限。可能因此导致跨站脚本攻击。</p>

  </div>

  </div>
<!--REMOVE-TOPIC:Security-->



