  <h4> 离线应用缓存的安全问题 </h4>

  <!-- NON-NORMATIVE SECTION -->

  <p>离线应用程序缓存引入的主要风险是注入攻击可以提升为持久的站点范围页面替换。 这种攻击涉及使用注入漏洞将两个文件上传到受害者站点。 第一个文件是一个应用程序缓存清单，其中只包含指向第二个文件的 Fallback 入口，该文件是一个HTML 页面，其清单声明为第一个文件。 一旦用户被定向到第二个文件，当用户或站点处于离线状态时，对给定 Fallback 命名空间内的任何文件的所有后续访问都将显示该第二个文件。 针对性的 DoS 攻击或 Cookie 炸弹攻击（客户端发送足够多的 Cookie 来导致服务器拒绝处理该请求）可用于确保该网站显示为脱机。</p>

  <p>为了缓解这种情况，清单只能指定与清单本身位于相同路径的 Fallback。这意味着服务器上特定目录中的内容注入上传漏洞只能升级为接管该目录及其子目录。 如果无法将文件注入到根目录，那么就无法接管整个站点。</p>

  <p>如果某个站点遭到这种方式的攻击，则只需删除恶意的清单就可以最终解决问题，因为下次更新清单时，将会得到 404 错误，然后用户代理就会清除缓存。然而，这里的“最终”是关键词。在对用户或服务器的攻击正在进行时，从受影响的用户到受影响的站点的连接已经被阻止，用户代理将简单地假定用户处于离线状态并将继续使用恶意的清单。不幸的是，如果还使用了 Cookie 炸弹攻击，那么仅仅删除清单是不够的；此外，服务器还得配置为返回 404 或 410 响应，而不是 413 “请求实体太大”响应。</p>

  <p>TLS 本身不会保护网站免受此攻击，因为攻击依赖于服务器本身提供的内容。 不使用应用程序缓存也不能阻止这种攻击，因为攻击依赖于攻击者提供的清单。</p>
<!--REMOVE-TOPIC:Security-->


